## 移动WEB开发基础

移动端开发现状：

移动端浏览器我们主要对webkit内核进行兼容；我们现在开发的移动端主要针对手机端开发
现在移动端碎片化比较严重，分辨率和屏幕尺寸大小不一；学会用谷歌浏览器模拟手机界面以及调试

### 视口：

浏览器显示页面内容的屏幕区域。

* 布局视口(layout viewport)

  

* 视觉视口(visual viewport)

  用户正在看到的网站的区域。

  可以通过缩放去操作视觉视口，但不会改变布局视口

* 理想视口(ideal viewport)

  为了使网站在移动端有最理想的浏览和阅读宽度而设定

  需要添加<meta>视口标签通知浏览器操作

  作用：让布局视口和理想视口的宽度一致。

标准的viewport参数设置

* 视口宽度和设备保持一致
* 视口的默认缩放比例1.0
* 不允许用户自行缩放
* 最大允许的缩放比例1.0
* 最小允许的缩放比例1.0

### 二倍图：

#### 物理像素&物理像素比

1. 物理像素点指的是屏幕显示的最小颗粒，是物理真实存在的，厂商在出厂时已设置好，后期不会改变。iPhone6/7/8  750x1334
2. 开发时的1px不是一定等于1个物理像素的
3. PC端页面，1px等于1个物理像素，移动端不尽相同。
4. 一个1px能显示的物理像素点的个数，称为物理像素比或屏幕像素比。
5. PC端和早起的手机屏幕/普通手机屏幕：1CSS像素=1物理像素
6. Retina(视网膜屏幕)是一种显示技术，可以把更多的物理像素点压缩在一块屏幕内，从而达到更高的分辨率，并提高屏幕显示的细腻程度。

多倍图：

背景：如果一个50 * 50px的图片放在手机屏幕中，占有的物理像素点是100 *100个，会造成图片模糊。

解决：使用一个本身就是100 *100px的图片去进行制作，替换原来的图片。然后设置图片尺寸为50 *50px。

背景图也需要使用多倍图来进行加载。使用background-size来更改图片大小。

切图要用原始尺寸，开发时使用开发尺寸。

#### 移动端开发选择

主流：单独制作移动端页面 eg.淘宝 京东 苏宁

* 两套代码，一般在网址域名前加m

其次：响应式页面兼容移动端  eg.三星手机官网

* 共用一套网站，在不同宽度的屏幕下自动适配。
* 制作麻烦，需要调兼容性问题

#### 常见问题解决：

###### 浏览器：

移动端浏览器基本以webkit内核为主，因此主要考虑webkit兼容性问题。

支持H5C3

浏览器的私有前缀我们只需考虑添加-webkit-即可。

CSS normalize.css

替代reset.css,可定制，让不同的浏览器在渲染网页元素的时候形式更统一，是一种现代的、为HTML5准备的优质替代方案。

优点：

1. 保护了有价值的默认值
2. 修复了浏览器的bug，解决了浏览器的不一致的默认样式
3. Normalize.css是模块化的，提高了易用性
4. 文档详细

怪异盒子模型 box-sizing: border-box;
此时盒子的宽度里包含了border padding content。

移动端技术选型

单独制作移动端页面：

* 流式布局(百分比布局)
* flex弹性布局(推荐)
* less+rem+媒体查询
* 混合布局

响应式：

* 媒体查询
* bootstrap

### 流式布局(百分比布局)

1. 也称非固定像素布局
2. 通过将盒子的宽度设置成百分比，从而根据屏幕的宽度来进行伸缩，不受固定像素的限制，内容向两侧填充。
3. 流式布局方式是移动web开发使用的比较常见的布局方式。

##### 注意事项

**制作过程中需要定义最大最小支持宽度**

* max-width/max-height
* min-width/min-height

#### 京东流式布局

二倍精灵图做法：

1. 等比缩放精灵图
2. 根据新的大小量取坐标
3. background-sizing也需要设置为缩放后的数值(精灵图原来宽度的一半)

制作渐变背景：

1. background-image （详情见MDN）

   1. 取值：
      * none：表示无背景图的关键字
      * image：用来标记将要显示的图片，支持多背景设置，‘，’分隔

   2. 语法：
      ```css
        background-image:
            url("https://mdn.mozillademos.org/files/6457/mdn_logo_only_color.png");
      ```

2. 相关函数：[`linear-gradient`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/linear-gradient), [`radial-gradient`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/radial-gradient), [`repeating-linear-gradient`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/repeating-linear-gradient), [`repeating-radial-gradient`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/repeating-radial-gradient)

3. linear-gradient：

   ```css
   /* 渐变轴为45度，从蓝色渐变到红色 */
   linear-gradient(45deg, blue, red);
   
   /* 从右下到左上、从蓝色渐变到红色 */
   linear-gradient(to left top, blue, red);
   
   /* 从下到上，从蓝色开始渐变、到高度40%位置是绿色渐变开始、最后以红色结束 */
   linear-gradient(0deg, blue, green 40%, red);
   ```

图片格式：

1. DPG图片压缩技术

   京东自主研发，可节省用户近50%的浏览流量，极大提升用户打开网页的速度。能够兼容JPEG，实现全平台、全部浏览器的兼容支持。压缩后的图片和webp的清晰度对比没有差距。

2. webp图片格式

   谷歌开发的一种旨在加快图片加载速度的图片格式。图片压缩后的体积大约只有JPEG的2/3，并能节省大量的服务器宽带资源和数据空间。8

图片转为块级元素？为什么 什么情况

### 携程flex布局

#### flex布局原理

通过给父盒子添加flex属性，来控制子盒子的位置和排列方式。

1. flex是flexible Box的缩写，意为弹性布局，用来为盒模型提供最大的灵活性，任何一个容器都可以指定为flex布局。
2. 当我们为父盒子设为flex布局后，子元素的float、clear和vertical-align属性将失效。
3. 又名伸缩布局、弹性布局、伸缩盒布局、弹性盒布局
4. 采用flex布局的元素，称为flex容器，简称容器。它的所有子元素称为容器成员，称为flex项目，简称项目。

#### 父项常见属性

##### flex-direction设置主轴方向

主轴与侧轴：

在flex布局中，分为主轴和侧轴两个方向。

默认主轴方向为x轴水平向右

默认侧轴方向为y轴垂直向下。

注意：主轴和侧轴会变化，子元素随主轴来排列。

| 属性值         | 解释说明 |
| -------------- | -------- |
| row            | 从左到右 |
| row-reverse    | 从右到左 |
| column         | 从上到下 |
| column-reverse | 从下到上 |

##### justify-content 主轴上子元素排列方式

注意：使用之前要确定主轴。

| 属性值        | 解释说明                                  |
| ------------- | ----------------------------------------- |
| flex-start    | 默认值从头开始。如果主轴是x轴，则从左往右 |
| flex-end      | 从尾部开始排列                            |
| center        | 在主轴居中对齐                            |
| space-around  | 平分剩余空间                              |
| space-between | 先两边贴边，再平分剩余空间。              |

##### flex-wrap 设置子元素是否换行

| 属性值 | 解释说明     |
| ------ | ------------ |
| nowrap | 不换行(默认) |
| wrap   | 换行         |

##### align-items 侧轴上子元素排列方式(单行)

在子项为单项(单行)的时候使用

| 属性值     | 解释说明           |
| ---------- | ------------------ |
| flex-start | 默认值 从上到下    |
| flex-end   | 从下到上           |
| center     | 挤在一起居中(垂直) |
| stretch    | 拉伸               |

##### align-content 侧轴上子元素排列方式(多行)

只能用于子项出现换行的情况。

| 属性值        | 解释说明                               |
| ------------- | -------------------------------------- |
| flex-start    | 在侧轴的头部开始排列                   |
| flex-end      | 在侧轴的尾部开始排列                   |
| center        | 在侧轴中间显示                         |
| space-around  | 子项在侧轴平分剩余空间                 |
| space-between | 子项在侧轴先分布在两头，再平分剩余空间 |
| stretch       | 设置子项元素高度平分父元素高度         |

##### flex-flow综合属性：

flex-direction和flex-wrap的综合

#### 子项常见属性：

##### flex属性：

定义子项目分配父盒子的剩余空间，用flex来表示是占多少份数。(子元素总宽度小于父元素宽度时)

属性值为1，表示占总份数的一份。默认值为0

flex不会定义子元素的宽度和高度，只负责子元素的排列方式！

##### align-self 控制子项自己在侧轴上的排列方式

允许单个子项与其他项目有不一样的对齐方式，可覆盖align-items

默认值为auto，表示继承父元素的align-items，如果没有父元素，则等同于stretch。

##### order定义项目的排列顺序

数值越小，排列越靠前，默认为0

注：和z-index不一样

attentions :

align-content也可以控制侧轴单行子元素的排列方式，但是此时如果再设置align-self，不会生效，align-self只能覆盖align-items的值。

常见flex布局：

上面图片下面文字型：

1. 设置主轴是y轴
2. 侧轴设置为居中对齐 

### 苏宁rem布局

##### rem:

1. 是一个相对单位
2. rem的基准是相对于html元素的字体大小

3. 优势：参考元素是html，一个页面只有一个html，可以很好的控制整个页面的元素大小比例

##### 媒体查询：

css3新语法；

* 使用@media查询，可以针对不同的媒体类型定义不同的样式。
* 可以针对不同的屏幕尺寸设置不同的样式
* 重置浏览器大小的过程中，页面也会根据浏览器的宽度和高度重新渲染页面

语法规范：

* 用@media开头
* mediatype媒体类型
* 关键字 and 、not 、 only
* media feature媒体特性  

```css
@media mediatype and|not|only (media feature) { CSS-Code}
```

mediatype: all/print/screen

media feature:width/min-width/max-width	

```css
@media screen and (max-width: 600px) {

	body {

		background-color: green;

	}

}
```

媒体查询+rem实现元素动态大小变化

样式比较繁多时，可以针对不同的媒体使用不同的样式表。

在link中进行判断，然后引入。

```css
<link rel="stylesheet" href="style.css" media="screen and (min-width: 500px)">
```

维护css弊端：

css是一门非程序式语言，没有变量、函数、SCOPE等概念。

1. 冗余度高，代码逻辑性不强
2. 不方便维护及拓展，不利于复用
3. 没有很好的计算能力

Less:

是一门css预处理语言，扩展了css的动态特性。

编译less文件

1. 所在文件夹打开命令行：lessc new.less > new.css

2. 安装插件，保存后自动编译

less嵌套写法

可以在父元素的样式中直接嵌套子元素的样式

`&` 表示当前选择器的父级

less运算： 

两个值都有单位时，结果取第一个值的单位，只有一个值有单位时，则这个值的单位就是结果的单位。

rem使用场景：

让一些不能等比自适应的元素，在设备尺寸改变时随之改变。

使用媒体查询根据不同设备按比例设置html的字体大小，页面使用rem做尺寸单位，当html字体大小变化时，元素尺寸也变化。

rem实际开发适配方案

1. 按照设计稿与设备宽度的比例，动态计算并设置根标签字体大小
2. 将设计稿中的数值按照同等比例转换为rem为单位的值，写入css中。

技术方案1： less+媒体查询+rem

技术方案2：flexible.js+rem

实现原理：将整个屏幕切分成若干等分，控制在不同尺寸屏幕下的份数相同，由此来计算每种屏幕下的rem值即可。

课后：

1. 苏宁轮播图上的按钮 

计算rem的公式：UI 图测量的尺寸 / 根元素 font-size

### 响应式开发

原理：

使用媒体查询针对不同宽度的设备进行布局和样式的设置，从而适配不同的设备。

响应式布局容器：

1. 响应式需要一个父级作为布局容器，来配合子集元素实现变化效果

2. 在不同屏幕下，通过媒体查询来改变这个布局容器得大小，再改变里面子元素的排列方式和大小，从而实现不同屏幕下，看到不同的页面布局和样式变化。

响应式尺寸划分：

1. 超小屏幕(手机，小于768px)：设置宽度为100%
2. 小屏幕(平板，≥768px)：设置宽度为750px
3. 中等屏幕(桌面显示器，≥992px)：宽度设置为970px
4. 大屏幕(大桌面显示器，≥1200px)：宽度设置为1170px

### Bootstrap

1. 布局容器：
   1. container类
      * 响应式布局的容器，固定宽度
      * 大屏：1170px
      * 中屏：970px
      * 小屏：750px
      * 超小屏：100%
   2. container-fluid类
      * 流式布局容器，百分百宽度
      * 占据全部视口
      * 适合制作移动端页面开发

栅格系统：

将页面布局划分为等宽的列，通过定义列数来模块化页面布局。

Bootstrap提供了一套响应式、移动设备优先的流式栅格系统，随着屏幕或视口尺寸的增加，系统会自动分为最多12列。

列嵌套

列偏移

阿里百秀

容器内添加div.row会自动消除container默认的padding



jpg：

可压缩、色彩丰富；不能保存透明背景图片

用途：插入图、大篇幅的背景图，本身不要求太清晰，保证文件加载够快即可。

png:

质量不可压缩、可以保存图层、质量较大；支持透明和半透明

用途：透明和半透明的精灵图、背景图，颜色单一、尺寸较小的图片

GIF：

本身跟压缩无关，颜色色值较少

支持透明，不支持半透明，可以保存动图

用途：透明背景图、动图

问题记录：

1. 两元素之间存在缝隙：
   1. 子元素高度未设置，小于父元素高度
   2. 浏览器百分比显示问题
   3. 屏幕分辨率
2. 修改模拟器分辨率后布局改变：
   1. 浏览器最小字体为12px  使用rem布局时，如果计算得到的字体小于12px，默认按12px展示，因此，修改元素width使其在整体变小时仍可以容纳12px字体即可。
